<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.80.0" />
    <meta name="description" content="Cours de Python">
<meta name="author" content="Cordier-Info">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Cours 6 - Cours Python</title>
    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">


<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>


<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI"
crossorigin="anonymous"
onload='renderMathInElement(document.body);'></script>


<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "$", right: "$", display: false}
            ]
        });
    });
</script>
    

    
    <link href="/css/nucleus.css?1612920171" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1612920171" rel="stylesheet">
    <link href="/css/hybrid.css?1612920171" rel="stylesheet">
    <link href="/css/featherlight.min.css?1612920171" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1612920171" rel="stylesheet">
    <link href="/css/auto-complete.css?1612920171" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1612920171" rel="stylesheet">
    <link href="/css/theme.css?1612920171" rel="stylesheet">
    <link href="/css/hugo-theme.css?1612920171" rel="stylesheet">
    
    <link href="/css/foo.css?1612920171" rel="stylesheet"><link href="/css/bar.css?1612920171" rel="stylesheet">

    <script src="/js/jquery-3.3.1.min.js?1612920171"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/docs/cours6/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href='/'>
  <svg id="grav-logo" style="width:100%; height:100%;" viewBox="0 0 504 140" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;">
    <path d="M235.832,71.564l-7.98,-0.001c-1.213,0.001 -2.197,0.987 -2.197,2.204l0,15.327l-0.158,0.132c-4.696,3.962 -10.634,6.14 -16.719,6.14c-14.356,0 -26.034,-11.68 -26.034,-26.037c0,-14.358 11.678,-26.035 26.034,-26.035c5.582,0 10.919,1.767 15.437,5.113c0.877,0.649 2.093,0.56 2.866,-0.211l5.69,-5.69c0.444,-0.442 0.675,-1.055 0.639,-1.681c-0.034,-0.627 -0.336,-1.206 -0.828,-1.597c-6.76,-5.363 -15.214,-8.314 -23.805,-8.314c-21.18,0 -38.414,17.233 -38.414,38.415c0,21.183 17.234,38.415 38.414,38.415c10.937,0 21.397,-4.705 28.698,-12.914c0.358,-0.403 0.556,-0.921 0.556,-1.46l0,-19.603c0,-1.217 -0.985,-2.203 -2.2,-2.203"
      style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M502.794,34.445c-0.408,-0.616 -1.1,-0.989 -1.838,-0.989l-8.684,0c-0.879,0 -1.673,0.522 -2.022,1.329l-24.483,56.839l-24.92,-56.852c-0.352,-0.799 -1.142,-1.316 -2.012,-1.316l-8.713,0c-0.744,0 -1.44,0.373 -1.843,0.995c-0.408,0.623 -0.476,1.408 -0.174,2.09l30.186,68.858c0.352,0.799 1.143,1.317 2.017,1.317l10.992,0c0.879,0 1.673,-0.527 2.021,-1.329l29.655,-68.861c0.289,-0.68 0.222,-1.461 -0.182,-2.081"
      style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M388.683,34.772c-0.353,-0.798 -1.142,-1.316 -2.017,-1.316l-10.988,0c-0.879,0 -1.673,0.522 -2.021,1.329l-29.655,68.861c-0.294,0.675 -0.226,1.46 0.182,2.077c0.407,0.619 1.096,0.993 1.838,0.993l8.684,0c0.879,0 1.673,-0.526 2.022,-1.329l24.478,-56.842l24.92,56.854c0.353,0.798 1.143,1.317 2.013,1.317l8.717,0c0.744,0 1.44,-0.374 1.843,-0.993c0.408,-0.624 0.471,-1.41 0.174,-2.094l-30.19,-68.857Z"
      style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M309.196,81.525l0.476,-0.229c8.675,-4.191 14.279,-13.087 14.279,-22.667c0,-13.881 -11.295,-25.174 -25.176,-25.174l-31.863,0c-1.214,0 -2.199,0.988 -2.199,2.202l0,68.855c0,1.219 0.985,2.204 2.199,2.204l7.979,0c1.214,0 2.2,-0.985 2.2,-2.204l0,-58.679l21.684,0c7.059,0 12.799,5.739 12.799,12.796c0,5.885 -3.996,10.989 -9.728,12.408c-1.032,0.261 -2.064,0.393 -3.071,0.393l-7.977,0c-0.829,0 -1.585,0.467 -1.959,1.205c-0.378,0.74 -0.305,1.625 0.187,2.296l22.62,30.884c0.412,0.566 1.07,0.901 1.771,0.901l9.915,0c0.827,0 1.587,-0.467 1.96,-1.207c0.378,-0.742 0.302,-1.629 -0.186,-2.296l-15.91,-21.688Z"
      style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M107.191,80.969c-7.255,-4.794 -11.4,-8.845 -15.011,-16.109c-2.47,4.977 -8.236,12.376 -17.962,18.198c-4.856,15.106 -27.954,44.015 -35.43,39.916c-2.213,-1.212 -2.633,-2.808 -2.133,-4.456c0.536,-4.129 9.078,-13.62 9.078,-13.62c0,0 0.18,1.992 2.913,6.187c-3.609,-11.205 5.965,-25.031 8.5,-29.738c3.985,-1.269 4.274,-6.387 4.274,-6.387c0.255,-7.909 -3.278,-13.635 -6.701,-17.059c2.459,3.002 3.255,7.539 3.372,11.694l0,0.023c0.012,0.469 0.012,0.93 0.011,1.39c-0.117,3.439 -1.157,8.19 -3.383,8.19l0.006,0.03c-2.289,-0.098 -5.115,0.391 -7.639,1.18l-5.582,1.334c0,0 2.977,-0.136 4.584,1.252c-1.79,2.915 -5.769,6.533 -10.206,8.588c-6.457,2.995 -8.312,-2.964 -5.034,-6.838c0.805,-0.946 1.618,-1.745 2.387,-2.399c-0.495,-0.513 -0.807,-1.198 -0.889,-2.068c-0.001,-0.005 -0.004,-0.009 -0.005,-0.013c-0.45,-1.977 -0.202,-4.543 2.596,-8.623c0.551,-0.863 1.214,-1.748 2.007,-2.647c0.025,-0.031 0.046,-0.059 0.072,-0.089c0.034,-0.042 0.072,-0.08 0.108,-0.121c0.02,-0.023 0.039,-0.045 0.059,-0.068c0.2,-0.228 0.413,-0.45 0.639,-0.663c3.334,-3.414 8.599,-6.966 16.897,-10.152c9.675,-14.223 13.219,-16.89 13.219,-16.89c1.071,-1.096 2.943,-2.458 3.632,-2.805c-5.053,-8.781 -6.074,-21.158 -4.75,-24.493c-0.107,0.18 -0.206,0.365 -0.287,0.556c0.49,-1.143 0.819,-1.509 1.328,-2.111c1.381,-1.632 6.058,-2.488 7.737,0.971c0.895,1.844 1.063,4.232 1.034,6.023c-3.704,-0.193 -7.063,4.036 -7.063,4.036c0,0 3.067,-1.448 6.879,-1.473c0,0 1.015,0.883 2.283,2.542c-1.712,3.213 -4.524,10.021 -2.488,17.168c0.338,1.408 0.849,2.619 1.483,3.648c0.024,0.045 0.044,0.089 0.069,0.135c0.051,0.066 0.096,0.122 0.144,0.183c3.368,5.072 9.542,5.665 9.542,5.665c-2.906,-1.45 -5.274,-3.76 -6.816,-6.56c-0.8,-1.498 -1.291,-2.762 -1.592,-3.761c-1.636,-6.313 0.771,-9.999 2.149,-12.471c3.17,-4.917 8.944,-7.893 15.151,-7.185c8.712,0.995 14.968,8.862 13.973,17.571c-0.608,5.321 -3.781,9.723 -8.142,12.117c1.049,2.839 -0.073,6.28 -0.073,6.28c2.642,3.323 2.758,5.238 2.667,7.017c-3.357,-0.565 -6.618,1.701 -6.618,1.701c0,0 6.476,-1.546 10.238,1.81c2.446,2.631 4.078,5.009 5.051,6.766c1.393,2.505 7.859,2.683 7.123,7.188c-0.737,4.499 -5.669,4.542 -13.401,-0.56M69.571,0c-38.424,0 -69.571,31.148 -69.571,69.567c0,38.422 31.147,69.573 69.571,69.573c38.42,0 69.568,-31.151 69.568,-69.573c0,-38.42 -31.148,-69.567 -69.568,-69.567"
      style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M73.796,51.693c0.813,-0.814 0.813,-2.134 0,-2.947c-0.815,-0.814 -2.133,-0.814 -2.947,0c-0.815,0.813 -0.815,2.133 0,2.947c0.814,0.813 2.132,0.813 2.947,0" style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M66.445,53.149c-0.814,0.813 -0.814,2.133 0,2.947c0.813,0.814 2.133,0.814 2.947,0c0.813,-0.814 0.813,-2.134 0,-2.947c-0.814,-0.813 -2.134,-0.813 -2.947,0" style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M79.231,54.233c-1.274,-1.274 -3.339,-1.272 -4.611,0l-2.713,2.712c-1.274,1.275 -1.274,3.339 0,4.612l2.978,2.978c1.274,1.275 3.338,1.274 4.611,0l2.712,-2.712c1.274,-1.274 1.274,-3.339 0,-4.612l-2.977,-2.978Z" style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M95.759,41.445c-2.151,-2.578 1.869,-7.257 4.391,-4.463c4.645,5.148 -2.237,7.041 -4.391,4.463M105.004,44.132c3.442,-6.553 -1.427,-10.381 -4.773,-13.523c-5.36,-5.039 -10.706,-7.217 -16.811,-0.241c-6.102,6.977 -2.226,15.068 3.356,19.061c5.584,3.994 14.782,1.255 18.228,-5.297"
      style="fill:#000;fill-rule:nonzero;"></path>
  </svg>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1612920171"></script>
<script type="text/javascript" src="/js/auto-complete.js?1612920171"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/cordier-info.github.io";
    
</script>
<script type="text/javascript" src="/js/search.js?1612920171"></script>

    
  </div>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/docs/" title="Docs" class="dd-item
        parent
        
        
        ">
      <a href="/docs/">
          Docs
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs/cours1/" title="Cours 1" class="dd-item ">
        <a href="/docs/cours1/">
        Cours 1
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs/cours2/" title="Cours 2" class="dd-item ">
        <a href="/docs/cours2/">
        Cours 2
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs/cours3/" title="Cours 3" class="dd-item ">
        <a href="/docs/cours3/">
        Cours 3
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs/cours4/" title="Cours 4" class="dd-item ">
        <a href="/docs/cours4/">
        Cours 4
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs/cours5/" title="Cours 5" class="dd-item ">
        <a href="/docs/cours5/">
        Cours 5
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs/cours6/" title="Cours 6" class="dd-item active">
        <a href="/docs/cours6/">
        Cours 6
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                   Cours 6
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#interaction-avec-le-système-dexploitation">Interaction avec le système d&rsquo;exploitation</a></li>
    <li><a href="#lecture-et-écriture-de-fichiers">Lecture et écriture de fichiers</a>
      <ul>
        <li><a href="#ouvrir-et-fermer-un-fichier">Ouvrir et fermer un fichier</a></li>
        <li><a href="#écrire-dans-un-fichier">Écrire dans un fichier</a></li>
        <li><a href="#lire-un-fichier">Lire un fichier</a></li>
      </ul>
    </li>
    <li><a href="#fichiers-image">Fichiers image</a></li>
    <li><a href="#interaction-avec-lutilisateur--la-fonction-input">Interaction avec l&rsquo;utilisateur : la fonction <code>input()</code></a></li>
    <li><a href="#récupérer-des-données-sur-le-web">Récupérer des données sur le web</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Cours 6
            </h1>
          

        


<h1 id="manipulation-de-fichiers">Manipulation de fichiers</h1>
<h2 id="interaction-avec-le-système-dexploitation">Interaction avec le système d&rsquo;exploitation</h2>
<p>Le module <code>os</code> offre la possibilité d&rsquo;interagir avec le système d&rsquo;exploitation indépendamment de la plateforme utilisée.</p>
<ul>
<li><code>os.getcwd()</code> renvoie le répertoire courant (répertoire depuis lequel le programme est exécuté) sous forme de chaîne.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> os

os<span style="color:#f92672">.</span>getcwd()
</code></pre></div><p><code>'/Users/cordiermarc/Documents/prof/informatique/Python_6'</code></p>
<ul>
<li><code>os.chdir('répertoire')</code> permet de changer le répertoire courant pour le répertoire donné en argument. On peut soit donner le chemin absolu (qui commence par la racine, <code>/</code> sur un système Unix)
soit un chemin relatif (qui commence par <code>.</code> pour désigner le répertoire courant).</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">os<span style="color:#f92672">.</span>chdir(<span style="color:#e6db74">&#39;/Users/cordiermarc/Documents&#39;</span>)
os<span style="color:#f92672">.</span>getcwd()
</code></pre></div><p><code>'/Users/cordiermarc/Documents'</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">os<span style="color:#f92672">.</span>chdir(<span style="color:#e6db74">&#39;./prof/informatique/Python_6&#39;</span>)
os<span style="color:#f92672">.</span>getcwd()
</code></pre></div><p><code>'/Users/cordiermarc/Documents/prof/informatique/Python_6'</code></p>
<ul>
<li><code>os.listdir('répertoire')</code> permet de connaître le contenu d&rsquo;un répertoire. Le nom raccourci du répertoire courant est <code>'.'</code>.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">os<span style="color:#f92672">.</span>listdir(<span style="color:#e6db74">&#39;.&#39;</span>)
</code></pre></div><pre><code>['.DS_Store',
 'puissances.txt',
 'images',
 'monfichier.rtf',
 'monfichier.txt',
 'cours6.ipynb',
 'ensoleillement.txt',
 '.ipynb_checkpoints']
</code></pre>
<ul>
<li><code>os.path</code> est un sous-module qui propose plusieurs fonctions permettant de jouer avec les chemins d&rsquo;accès et les noms de fichier. On en verra un exemple d&rsquo;utilisation à la fin du document.</li>
</ul>
<h2 id="lecture-et-écriture-de-fichiers">Lecture et écriture de fichiers</h2>
<p>Jusque-là, les différentes données de nos programmes étaient directement écrites dans le code et les sorties s&rsquo;affichaient sur le shell.<br>
Mais il est souvent plus utile d&rsquo;importer des données ou d&rsquo;écrire les sorties dans des fichiers plutôt que sur l&rsquo;écran. Pour cela, Python utilise l&rsquo;objet <code>file</code>.</p>
<h3 id="ouvrir-et-fermer-un-fichier">Ouvrir et fermer un fichier</h3>
<p>Un objet <code>file</code> est créé par l&rsquo;utilisation de la fonction <code>open(nom du fichier,mode)</code> qui prend deux arguments.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">f <span style="color:#f92672">=</span> open(<span style="color:#e6db74">&#39;monfichier.txt&#39;</span>,<span style="color:#e6db74">&#39;w&#39;</span>)
</code></pre></div><p>Le premier argument, <em>nom du fichier</em>, est une chaîne contenant le nom du fichier. Ce nom peut être donné avec le chemin d&rsquo;accès absolu ou seulement l&rsquo;arborescence relative au dossier dans lequel le programme est exécuté.
En écrivant un nom sans chemin, le fichier se trouve dans le répertoire courant.<!-- raw HTML omitted --></p>
<p>Le deuxième argument, <em>mode</em>, est une chaîne d&rsquo;un ou deux caractères décrivant la façon dont le fichier est utilisé.
<em>mode</em> peut être <code>r</code> quand le fichier n&rsquo;est accédé qu&rsquo;en lecture, <code>w</code> en écriture seulement (un fichier existant portant le même nom sera alors écrasé)
et <code>a</code> ouvre le fichier en mode ajout (toute donnée écrite dans le fichier est automatiquement ajoutée à la fin). <code>r+</code> ouvre le fichier en mode lecture/écriture. L&rsquo;argument mode est optionnel, sa valeur par défaut est <code>r</code>.<!-- raw HTML omitted --><code>b</code> collé à la fin du mode indique que le fichier doit être ouvert en mode binaire c&rsquo;est-à-dire que les données sont lues et écrites sous forme d&rsquo;octets (type bytes).
Ce mode est à utiliser pour les fichiers contenant autre chose que du texte.</p>
<p>Les objets <code>file</code> sont fermés grâce à la méthode <code>close()</code> : <code>f.close()</code> par exemple.<!-- raw HTML omitted --> Sinon Python ferme les fichiers automatiquement lorsque le programme se termine.</p>
<h3 id="écrire-dans-un-fichier">Écrire dans un fichier</h3>
<p>La méthode <code>write()</code> d&rsquo;un objet <code>file</code> écrit une chaîne de caractères dans le fichier et renvoie le nombre de caractères inscrits.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">f<span style="color:#f92672">.</span>write(<span style="color:#e6db74">&#39;Coucou monde !&#39;</span>)
</code></pre></div><p><code>14</code></p>
<p>Plus pratique, la fonction native <code>print()</code> peut accepter en argument un objet <code>file</code>. Plutôt que d&rsquo;être affichée sur le shell, la sortie de <code>print()</code> est alors redirigée vers ce fichier.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>, <span style="color:#ae81ff">35</span>, <span style="color:#e6db74">&#39;Cl&#39;</span>, <span style="color:#ae81ff">2</span>, sep<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span>, file<span style="color:#f92672">=</span>f)
f<span style="color:#f92672">.</span>close()
</code></pre></div><p>Exemple: le programme suivant écrit les quatre premières puissances de tous les entiers entre 1 et 1000, chaque champ étant séparé par une virgule, dans le fichier puissances.txt.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fi <span style="color:#f92672">=</span> open(<span style="color:#e6db74">&#39;puissances.txt&#39;</span>,<span style="color:#e6db74">&#39;w&#39;</span>)
<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1001</span>) :
    <span style="color:#66d9ef">print</span>(i, i<span style="color:#f92672">**</span><span style="color:#ae81ff">2</span>, i<span style="color:#f92672">**</span><span style="color:#ae81ff">3</span>, i<span style="color:#f92672">**</span><span style="color:#ae81ff">4</span>, sep<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;, &#39;</span>, file<span style="color:#f92672">=</span>fi)
fi<span style="color:#f92672">.</span>close()
</code></pre></div><h3 id="lire-un-fichier">Lire un fichier</h3>
<p>Pour lire <code>n</code> bytes d&rsquo;un fichier, on utilise <code>f.read(n)</code>. En omettant <code>n</code>, tout le fichier est lu.<br>
<code>readline()</code> lit une seule ligne d&rsquo;un fichier jusqu&rsquo;au, en l&rsquo;incluant, caractère <code>\n</code> de nouvelle ligne. Un nouvel appel de <code>readline()</code> lit la ligne suivante et ainsi de suite. <code>read()</code>et <code>readline()</code> renvoie toutes les deux une chaîne vide lorsque la fin du fichier est atteinte.<!-- raw HTML omitted -->
Pour lire en une fois toutes les lignes dans une liste de chaînes, on utilise <code>f.readlines()</code>.</p>
<p>Les objet <code>file</code> sont itérables. On peut ainsi retourner chaque ligne d&rsquo;un fichier une à une en utilisant une boucle :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">f <span style="color:#f92672">=</span> open(<span style="color:#e6db74">&#39;monfichier.txt&#39;</span>)
<span style="color:#66d9ef">for</span> ligne <span style="color:#f92672">in</span> f :
    <span style="color:#66d9ef">print</span>(ligne, end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span>)
f<span style="color:#f92672">.</span>close()
</code></pre></div><pre><code>Coucou monde !
35Cl2
</code></pre>
<p>Comme <code>ligne</code> contient déjà le caractère de nouvelle ligne lorsqu&rsquo;elle est lue, on utilise <code>end = ''</code> pour empêcher <code>print</code> d&rsquo;en ajouter un autre.</p>
<p>Cette méthode de lecture ligne à ligne est à privilégier pour les gros fichiers à moins de vraiment vouloir contenir en mémoire l&rsquo;ensemble du fichier.</p>
<p>Pour lire les nombres du fichier <code>'puissance.txt'</code> écrit précédemment, les colonnes doivent être converties en une liste d&rsquo;entiers.<!-- raw HTML omitted -->
Pour cela, chaque ligne doit être décomposée en ses différents champs et chaque champ explicitement converti en entier grâce à <code>int()</code> :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fo <span style="color:#f92672">=</span> open(<span style="color:#e6db74">&#39;puissances.txt&#39;</span>)
carrés, cubes, puiss4 <span style="color:#f92672">=</span> [],[],[]
lignes <span style="color:#f92672">=</span> fo<span style="color:#f92672">.</span>readlines()
fo<span style="color:#f92672">.</span>close()
<span style="color:#66d9ef">for</span> ligne <span style="color:#f92672">in</span> lignes :
    champs <span style="color:#f92672">=</span> ligne<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;,&#39;</span>)
    carrés<span style="color:#f92672">.</span>append(int(champs[<span style="color:#ae81ff">1</span>]))
    cubes<span style="color:#f92672">.</span>append(int(champs[<span style="color:#ae81ff">2</span>]))
    puiss4<span style="color:#f92672">.</span>append(int(champs[<span style="color:#ae81ff">3</span>]))
n <span style="color:#f92672">=</span> <span style="color:#ae81ff">500</span>
<span style="color:#66d9ef">print</span>(n, <span style="color:#e6db74">&#39;au cube vaut&#39;</span>, cubes[n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
</code></pre></div><pre><code>500 au cube vaut 125000000
</code></pre>
<p>Mais en pratique, il vaut mieux utiliser NumPy (2e semestre) pour des fichiers de données comme celui-ci.</p>
<p>Vous apprendrez aussi à utiliser les méthodes des bases de données.</p>
<hr>
<p>Dans cet exemple, on va créer un petit gif qui illustre le théorème de La Hire :</p>
<p>le programme produit un nouveau dossier <code>petitgif</code> dans lequel il crée 40 fichiers <code>svg</code> aux noms incrémentés (de <code>fig00.svg</code> à <code>fig39.svg</code>) décrivant des cercles et des segments.</p>
<p>Le <code>svg</code> pour Scalable Vector Graphics est un format de données ASCII, donc texte, conçu pour décrire des ensembles de graphiques vectoriels et basé sur le XML, un langage utilisant des balises <code>&lt;...&gt;</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#f92672">import</span> math

nfigs <span style="color:#f92672">=</span> <span style="color:#ae81ff">40</span>
<span style="color:#75715e"># on crée un répertoire &#39;petigif&#39; à partir du répertoire courant s&#39;il n&#39;existe pas déjà</span>
rép_actuel <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>getcwd()
nv_rép <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(rép_actuel, <span style="color:#e6db74">&#39;petitgif&#39;</span>) 
<span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>exists(nv_rép):  
    os<span style="color:#f92672">.</span>mkdir(nv_rép)                           
    
hauteur_cadre, largeur_cadre <span style="color:#f92672">=</span> <span style="color:#ae81ff">500</span>, <span style="color:#ae81ff">500</span>
<span style="color:#75715e"># positions du centre du grand cercle :</span>
cx, cy <span style="color:#f92672">=</span> hauteur_cadre <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>, largeur_cadre <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>
<span style="color:#75715e"># rayons des trois cercles</span>
r1, r2, r3 <span style="color:#f92672">=</span> <span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">10</span>

<span style="color:#75715e"># liste d&#39;angles pour faire tourner le petit disque :</span>
alphas <span style="color:#f92672">=</span> [<span style="color:#ae81ff">2</span><span style="color:#f92672">*</span>math<span style="color:#f92672">.</span>pi <span style="color:#f92672">/</span> nfigs <span style="color:#f92672">*</span> n <span style="color:#66d9ef">for</span> n <span style="color:#f92672">in</span> range(nfigs)]

<span style="color:#66d9ef">for</span> n, alpha <span style="color:#f92672">in</span> enumerate(alphas):
    filename <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(nv_rép, <span style="color:#e6db74">&#39;fig{:02d}.svg&#39;</span><span style="color:#f92672">.</span>format(n))
    image <span style="color:#f92672">=</span> open(filename, <span style="color:#e6db74">&#39;w&#39;</span>)   
    <span style="color:#75715e"># En-tête du fichier SVG :</span>
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;&#34;&#34;&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
</span><span style="color:#e6db74">                 &lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34;
</span><span style="color:#e6db74">                      xmlns:xlink=&#34;http://www.w3.org/1999/xlink&#34;
</span><span style="color:#e6db74">                      width=&#34;{}&#34; height=&#34;{}&#34; style=&#34;background: {}&#34;&gt;&#34;&#34;&#34;</span><span style="color:#f92672">.</span>format(hauteur_cadre, largeur_cadre, <span style="color:#e6db74">&#39;#ffffff&#39;</span>), file<span style="color:#f92672">=</span>image)
    
    <span style="color:#75715e"># grand cercle bleu :</span>
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;&lt;circle cx=&#34;{}&#34; cy=&#34;{}&#34; r=&#34;{}&#34; style=&#34;stroke: blue; stroke-width: 2px; fill: none;&#34;/&gt;&#39;</span><span style="color:#f92672">.</span>format(cx, cy, r1),file<span style="color:#f92672">=</span>image)
    
    <span style="color:#75715e"># grands diamètres 1 à 4 :</span>
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;&lt;line x1=&#34;{}&#34; y1=&#34;{}&#34; x2=&#34;{}&#34; y2=&#34;{}&#34; stroke=&#34;blue&#34; /&gt;&#39;</span><span style="color:#f92672">.</span>format(cx,cy<span style="color:#f92672">-</span>r1,cx,cy<span style="color:#f92672">+</span>r1), file<span style="color:#f92672">=</span>image)
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;&lt;line x1=&#34;{}&#34; y1=&#34;{}&#34; x2=&#34;{}&#34; y2=&#34;{}&#34; stroke=&#34;blue&#34; /&gt;&#39;</span><span style="color:#f92672">.</span>format(cx<span style="color:#f92672">-</span>r1,cy,cx<span style="color:#f92672">+</span>r1,cy), file<span style="color:#f92672">=</span>image)
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;&lt;line x1=&#34;{}&#34; y1=&#34;{}&#34; x2=&#34;{}&#34; y2=&#34;{}&#34; stroke=&#34;blue&#34; /&gt;&#39;</span><span style="color:#f92672">.</span>format(cx<span style="color:#f92672">+</span>r1<span style="color:#f92672">*</span>math<span style="color:#f92672">.</span>cos(math<span style="color:#f92672">.</span>pi<span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>),cy<span style="color:#f92672">+</span>r1<span style="color:#f92672">*</span>math<span style="color:#f92672">.</span>sin(math<span style="color:#f92672">.</span>pi<span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>),cx<span style="color:#f92672">-</span>r1<span style="color:#f92672">*</span>math<span style="color:#f92672">.</span>cos(math<span style="color:#f92672">.</span>pi<span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>),cy<span style="color:#f92672">-</span>r1<span style="color:#f92672">*</span>math<span style="color:#f92672">.</span>sin(math<span style="color:#f92672">.</span>pi<span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>)), file<span style="color:#f92672">=</span>image)
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;&lt;line x1=&#34;{}&#34; y1=&#34;{}&#34; x2=&#34;{}&#34; y2=&#34;{}&#34; stroke=&#34;blue&#34; /&gt;&#39;</span><span style="color:#f92672">.</span>format(cx<span style="color:#f92672">+</span>r1<span style="color:#f92672">*</span>math<span style="color:#f92672">.</span>cos(<span style="color:#f92672">-</span>math<span style="color:#f92672">.</span>pi<span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>),cy<span style="color:#f92672">+</span>r1<span style="color:#f92672">*</span>math<span style="color:#f92672">.</span>sin(<span style="color:#f92672">-</span>math<span style="color:#f92672">.</span>pi<span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>),cx<span style="color:#f92672">-</span>r1<span style="color:#f92672">*</span>math<span style="color:#f92672">.</span>cos(<span style="color:#f92672">-</span>math<span style="color:#f92672">.</span>pi<span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>),cy<span style="color:#f92672">-</span>r1<span style="color:#f92672">*</span>math<span style="color:#f92672">.</span>sin(<span style="color:#f92672">-</span>math<span style="color:#f92672">.</span>pi<span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>)), file<span style="color:#f92672">=</span>image)
    
    <span style="color:#75715e"># cercle rouge à l&#39;intérieur du cercle bleu déplacé d&#39;un angle alpha à chaque itération </span>
    cx2, cy2 <span style="color:#f92672">=</span> cx <span style="color:#f92672">+</span> (r1<span style="color:#f92672">-</span>r2) <span style="color:#f92672">*</span> math<span style="color:#f92672">.</span>cos(alpha), cy <span style="color:#f92672">+</span> (r1<span style="color:#f92672">-</span>r2) <span style="color:#f92672">*</span> math<span style="color:#f92672">.</span>sin(alpha)
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;&lt;circle cx=&#34;{}&#34; cy=&#34;{}&#34; r=&#34;{}&#34; style=&#34;stroke: red; fill: none; &#34;/&gt;&#39;</span><span style="color:#f92672">.</span>format(cx2, cy2, r2), file<span style="color:#f92672">=</span>image)
    
    cx3, cy3 <span style="color:#f92672">=</span> cx <span style="color:#f92672">+</span> r1 <span style="color:#f92672">*</span> math<span style="color:#f92672">.</span>cos(alpha), cy
    cx4, cy4 <span style="color:#f92672">=</span> cx , cy <span style="color:#f92672">+</span> r1 <span style="color:#f92672">*</span> math<span style="color:#f92672">.</span>sin(alpha)
    cx5, cy5 <span style="color:#f92672">=</span> cx <span style="color:#f92672">+</span> r1 <span style="color:#f92672">*</span> math<span style="color:#f92672">.</span>cos(alpha<span style="color:#f92672">+</span>math<span style="color:#f92672">.</span>pi<span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>)<span style="color:#f92672">*</span>math<span style="color:#f92672">.</span>cos(math<span style="color:#f92672">.</span>pi<span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>), cy <span style="color:#f92672">-</span> r1 <span style="color:#f92672">*</span> math<span style="color:#f92672">.</span>cos(alpha<span style="color:#f92672">+</span>math<span style="color:#f92672">.</span>pi<span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>)<span style="color:#f92672">*</span>math<span style="color:#f92672">.</span>sin(math<span style="color:#f92672">.</span>pi<span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>)
    cx6, cy6 <span style="color:#f92672">=</span> cx <span style="color:#f92672">+</span> r1 <span style="color:#f92672">*</span> math<span style="color:#f92672">.</span>sin(alpha<span style="color:#f92672">+</span>math<span style="color:#f92672">.</span>pi<span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>)<span style="color:#f92672">*</span>math<span style="color:#f92672">.</span>cos(math<span style="color:#f92672">.</span>pi<span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>) , cy <span style="color:#f92672">+</span> r1 <span style="color:#f92672">*</span> math<span style="color:#f92672">.</span>sin(alpha<span style="color:#f92672">+</span>math<span style="color:#f92672">.</span>pi<span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>)<span style="color:#f92672">*</span>math<span style="color:#f92672">.</span>sin(math<span style="color:#f92672">.</span>pi<span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>)
    
    <span style="color:#75715e"># petits diamètres 1 et 2 :</span>
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;&lt;line x1=&#34;{}&#34; y1=&#34;{}&#34; x2=&#34;{}&#34; y2=&#34;{}&#34; stroke=&#34;red&#34; /&gt;&#39;</span><span style="color:#f92672">.</span>format(cx3,cy3,cx4,cy4), file<span style="color:#f92672">=</span>image)
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;&lt;line x1=&#34;{}&#34; y1=&#34;{}&#34; x2=&#34;{}&#34; y2=&#34;{}&#34; stroke=&#34;red&#34; /&gt;&#39;</span><span style="color:#f92672">.</span>format(cx5,cy5,cx6,cy6), file<span style="color:#f92672">=</span>image)
    
    <span style="color:#75715e"># 4 petits disques :  </span>
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;&lt;circle cx=&#34;{}&#34; cy=&#34;{}&#34; r=&#34;{}&#34; style=&#34;stroke: purple; fill: purple;&#34;/&gt;&#39;</span><span style="color:#f92672">.</span>format(cx3, cy3, r3), file<span style="color:#f92672">=</span>image)
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;&lt;circle cx=&#34;{}&#34; cy=&#34;{}&#34; r=&#34;{}&#34; style=&#34;stroke: purple; fill: purple;&#34;/&gt;&#39;</span><span style="color:#f92672">.</span>format(cx4, cy4, r3), file<span style="color:#f92672">=</span>image)
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;&lt;circle cx=&#34;{}&#34; cy=&#34;{}&#34; r=&#34;{}&#34; style=&#34;stroke: purple; fill: purple;&#34;/&gt;&#39;</span><span style="color:#f92672">.</span>format(cx5, cy5, r3), file<span style="color:#f92672">=</span>image)
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;&lt;circle cx=&#34;{}&#34; cy=&#34;{}&#34; r=&#34;{}&#34; style=&#34;stroke: purple; fill: purple;&#34;/&gt;&#39;</span><span style="color:#f92672">.</span>format(cx6, cy6, r3), file<span style="color:#f92672">=</span>image)
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;&lt;/svg&gt;&#39;</span>, file<span style="color:#f92672">=</span>image)
</code></pre></div><p>On peut utiliser ensuite le logiciel libre <a href="https://imagemagick.org/index.php">ImageMagick software</a> qui permet de créer un gif à partir d&rsquo;une série d&rsquo;images via la ligne de commande (une fois dans le répertoire <em>petitgif</em>) :<!-- raw HTML omitted --><code>convert -delay 5 -loop 0 fig*.svg animation.gif</code></p>
<p><img src="/animation.gif" alt=""></p>
<h2 id="fichiers-image">Fichiers image</h2>
<p>Grâce à la librairie PIL (python imaging library) Python permet aussi de manipuler des fichiers image.<!-- raw HTML omitted -->
Les fonctions de ce module permettent d&rsquo;avoir accès aux pixels d&rsquo;une image par leurs coordonnées cartésiennes (<em>colonne</em>,<em>ligne</em>) :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> PIL <span style="color:#f92672">import</span> Image

image <span style="color:#f92672">=</span> Image<span style="color:#f92672">.</span>open(<span style="color:#e6db74">&#39;images/Darwin.jpg&#39;</span>)
largeur, hauteur <span style="color:#f92672">=</span> image<span style="color:#f92672">.</span>size
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;largeur : {} pixels, hauteur : {} pixels&#39;</span><span style="color:#f92672">.</span>format(largeur,hauteur))
</code></pre></div><p><code>largeur : 700 pixels, hauteur : 967 pixels</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">pixels_image <span style="color:#f92672">=</span> image<span style="color:#f92672">.</span>load()
pixels_image[<span style="color:#ae81ff">23</span>,<span style="color:#ae81ff">102</span>]
</code></pre></div><p><code>(90, 78, 66)</code></p>
<p>Chaque pixel contient un tuple de 3 éléments codant sa couleur au format RGB : chacune des 3 couleurs primaires, rouge, vert et bleu, est codée par un byte de 8 bits autorisant donc 256 valeurs
(0 pour le noir, 255 pour la couleur saturée). Cela fait en tout une palette de $256^3$ soit plus de 16 millions de couleurs.<!-- raw HTML omitted --></p>
<p>Supposons que l&rsquo;on souhaite transformer une photo en couleur en une photo noir et blanc (ou plutôt en niveaux de gris).<!-- raw HTML omitted -->On peut commencer par définir une fonction <code>intensité_moyenne(pixel)</code> qui fait la moyenne des intensités des 3 couleurs de chaque pixel. Puis on affecte cette valeur unique à chacune des intensités des 3 couleurs dans une nouvelle image (cela donne une teinte plus ou moins foncée de gris).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">intensité_moyenne</span>(pixel) :
    Imoy <span style="color:#f92672">=</span> (pixel[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>pixel[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">+</span>pixel[<span style="color:#ae81ff">2</span>])<span style="color:#f92672">/</span><span style="color:#ae81ff">3</span>
    <span style="color:#66d9ef">return</span> int(Imoy)

image_NB <span style="color:#f92672">=</span> Image<span style="color:#f92672">.</span>new(<span style="color:#e6db74">&#34;RGB&#34;</span>, (largeur, hauteur), <span style="color:#e6db74">&#34;black&#34;</span>)
pixels_image_NB <span style="color:#f92672">=</span> image_NB<span style="color:#f92672">.</span>load()
<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(largeur) :
    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(hauteur) :
        Imoy <span style="color:#f92672">=</span> intensité_moyenne(pixels_image[i,j])
        pixels_image_NB[i,j] <span style="color:#f92672">=</span> (Imoy,Imoy,Imoy)

<span style="color:#66d9ef">print</span>(pixels_image[<span style="color:#ae81ff">23</span>,<span style="color:#ae81ff">102</span>],pixels_image_NB[<span style="color:#ae81ff">23</span>,<span style="color:#ae81ff">102</span>])
image_NB<span style="color:#f92672">.</span>save(<span style="color:#e6db74">&#39;images/Darwin_N&amp;B.jpg&#39;</span>)
</code></pre></div><p><code>(90, 78, 66) (78, 78, 78)</code></p>
<p><img src="/resultat.jpg" alt=""></p>
<p>On peut aussi créer une image à partir de rien comme dans cet exemple où la couleur des pixels dépend de leurs positions :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">img <span style="color:#f92672">=</span> Image<span style="color:#f92672">.</span>new( <span style="color:#e6db74">&#39;RGB&#39;</span>, (<span style="color:#ae81ff">250</span>,<span style="color:#ae81ff">250</span>), <span style="color:#e6db74">&#34;black&#34;</span>) 
pixels <span style="color:#f92672">=</span> img<span style="color:#f92672">.</span>load() 
<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(img<span style="color:#f92672">.</span>size[<span style="color:#ae81ff">0</span>]):    
    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(img<span style="color:#f92672">.</span>size[<span style="color:#ae81ff">1</span>]):    
        pixels[i,j] <span style="color:#f92672">=</span> (i, j, <span style="color:#ae81ff">100</span>) 
img
</code></pre></div><p><img src="/output_52.png" alt=""></p>
<h2 id="interaction-avec-lutilisateur--la-fonction-input">Interaction avec l&rsquo;utilisateur : la fonction <code>input()</code></h2>
<p>La plupart des scripts élaborés nécessitent à un moment ou à un autre une intervention de l&rsquo;utilisateur (entrée d&rsquo;un paramètre, clic de souris sur un bouton, etc.). Dans un script en mode texte (comme ceux que nous avons créés jusqu&rsquo;à présent), la méthode la plus simple consiste à employer la fonction native <code>input()</code>. Cette fonction provoque une interruption dans le programme courant. L&rsquo;utilisateur est invité à entrer des caractères au clavier et à terminer avec <code>&lt;Enter&gt;</code>. Lorsque cette touche est enfoncée, l&rsquo;exécution du programme se poursuit, et la fonction fournit en retour une valeur correspondant à ce que l&rsquo;utilisateur a entré. Cette valeur peut alors être assignée à une variable quelconque.</p>
<p>Si un argument est donné, il est affiché à l&rsquo;écran :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;Quel est votre film préféré ?&#34;</span>)
s <span style="color:#f92672">=</span> input(<span style="color:#e6db74">&#39;--&gt;&#39;</span>)
</code></pre></div><p><code>Quel est votre film préféré ?</code></p>
<p><code>--&gt;</code> <strong>La Vie de Brian</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">s
</code></pre></div><p><code>'La Vie de Brian'</code></p>
<p><code>input()</code> convertit ce qui a été entré au clavier en chaîne de caractères. Si on attend d&rsquo;autres types de données, il faut utiliser les fonctions de conversion <code>int()</code> ou <code>float</code> :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">a <span style="color:#f92672">=</span> int(input(<span style="color:#e6db74">&#39;Choisir un chiffre :&#39;</span>))
a<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>
</code></pre></div><p><code>Choisir un chiffre :</code> <strong>4</strong></p>
<p><code>8</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">a <span style="color:#f92672">=</span> float(input(<span style="color:#e6db74">&#39;Choisir un chiffre :&#39;</span>))
a<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>
</code></pre></div><p><code>Choisir un chiffre :</code> <strong>2</strong></p>
<p><code>4.0</code></p>
<h2 id="récupérer-des-données-sur-le-web">Récupérer des données sur le web</h2>
<p>Exemple de programme :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> requests
<span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#f92672">as</span> plt
<span style="color:#f92672">import</span> matplotlib.dates <span style="color:#f92672">as</span> mdates
<span style="color:#f92672">from</span> dateutil.parser <span style="color:#f92672">import</span> parse

dep <span style="color:#f92672">=</span> input(<span style="color:#e6db74">&#34;Numéro du département ? &#34;</span>)

<span style="color:#75715e"># données gouvernementales covid</span>
url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://www.data.gouv.fr/fr/datasets/r/63352e38-d353-4b54-bfd1-f1b3ee1cabd7&#34;</span>
download <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>get(url)
brut <span style="color:#f92672">=</span> download<span style="color:#f92672">.</span>content<span style="color:#f92672">.</span>decode(<span style="color:#e6db74">&#39;utf-8&#39;</span>) <span style="color:#75715e"># pour transformer les bytes récupérés en string</span>
lignes <span style="color:#f92672">=</span> brut<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>)
date, hosp <span style="color:#f92672">=</span> [],[]
<span style="color:#66d9ef">for</span> ligne <span style="color:#f92672">in</span> lignes[<span style="color:#ae81ff">1</span>:<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>:<span style="color:#ae81ff">3</span>] : <span style="color:#75715e"># on saute l&#39;en-tête et ne garde que les sexes 0 correspondant à la somme féminin+masculin</span>
    champs <span style="color:#f92672">=</span> ligne<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;;&#39;</span>)
    <span style="color:#66d9ef">if</span> champs[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;&#34;{}&#34;&#39;</span><span style="color:#f92672">.</span>format(dep) :
        date<span style="color:#f92672">.</span>append(parse(champs[<span style="color:#ae81ff">2</span>]<span style="color:#f92672">.</span>strip(<span style="color:#e6db74">&#39;&#34;&#39;</span>))) <span style="color:#75715e"># parse() sert à convertir la chaîne de caractères en une date</span>
        hosp<span style="color:#f92672">.</span>append(int(champs[<span style="color:#ae81ff">4</span>]))

<span style="color:#75715e"># liste noms des départements</span>
url2 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://static.data.gouv.fr/resources/departements-et-leurs-regions/20190815-175403/departements-region.csv&#34;</span>
download2 <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>get(url2)
brut2 <span style="color:#f92672">=</span> download2<span style="color:#f92672">.</span>content<span style="color:#f92672">.</span>decode(<span style="color:#e6db74">&#39;utf-8&#39;</span>)
lignes2 <span style="color:#f92672">=</span> brut2<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>)
<span style="color:#66d9ef">for</span> li <span style="color:#f92672">in</span> lignes2 :
    ch <span style="color:#f92672">=</span> li<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;,&#39;</span>)
    <span style="color:#66d9ef">if</span> ch[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">==</span>str(dep) :
        nom_dep <span style="color:#f92672">=</span> ch[<span style="color:#ae81ff">1</span>]

fig, ax <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">15</span>,<span style="color:#ae81ff">10</span>))
ax<span style="color:#f92672">.</span>plot(date,hosp)
plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#34;Patients Covid en réa en {}&#34;</span><span style="color:#f92672">.</span>format(nom_dep), fontsize<span style="color:#f92672">=</span><span style="color:#ae81ff">16</span>)
ax<span style="color:#f92672">.</span>xaxis<span style="color:#f92672">.</span>set_major_formatter(mdates<span style="color:#f92672">.</span>DateFormatter(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">/%m&#39;</span>))
ax<span style="color:#f92672">.</span>xaxis<span style="color:#f92672">.</span>set_major_locator(mdates<span style="color:#f92672">.</span>DayLocator(interval<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>))
fig<span style="color:#f92672">.</span>autofmt_xdate()
plt<span style="color:#f92672">.</span>show()
</code></pre></div><p><img src="/covid17.png" alt="covid17"></p>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1612920171"></script>
    <script src="/js/perfect-scrollbar.min.js?1612920171"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1612920171"></script>
    <script src="/js/jquery.sticky.js?1612920171"></script>
    <script src="/js/featherlight.min.js?1612920171"></script>
    <script src="/js/highlight.pack.js?1612920171"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1612920171"></script>
    <script src="/js/learn.js?1612920171"></script>
    <script src="/js/hugo-learn.js?1612920171"></script>
    
        
            <script src="/mermaid/mermaid.js?1612920171"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

